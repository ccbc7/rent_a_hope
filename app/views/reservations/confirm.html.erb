<h1>予約確認画面</h1>
<h3>この部屋を予約しようとしているユーザー</h3>
<table>
  <tr>
    <th>ルーム画像:</th>
    <td>
      <% if @reservation.avatar? %>
        <%= image_tag @reservation.avatar, class: "room_image" %>
      <% end %>
    </td>
  </tr>
  <tr>
    <th>予約者ID:</th>
    <td>
      <%= @current_user.id %>
    </td>
  </tr>
  <tr>
    <th>予約者名:</th>
    <td>
      <%= @current_user.user_name %>
    </td>
  </tr>
  <tr>
    <th>ルームネーム:</th>
    <td>
      <%= @room.room_name %>
    </td>
  </tr>
  <tr>
    <th>料金:</th>
    <td>
      <%= @room.charge %>円
    </td>
  </tr>
  <tr>
    <th>開始日:</th>
    <td>
      <%= params[:start_date] %>
    </td>
  </tr>
  <tr>
    <th>終了日:</th>
    <td>
      <%= params[:end_date] %>
    </td>
  </tr>
  <tr>
    <th>人数:</th>
    <td>
      <%= params[:people] %>人
    </td>
  </tr>
  <tr>
    <th>合計料金:</th>
    <td>
      <% sub_price = @reservation.charge * @reservation.people %>
      <% total_day = ((@reservation.end_date - @reservation.start_date)/3600/24+1).floor %>
        <% total_price = sub_price * total_day %>
        <%= total_price %>円
    </td>
  </tr>
</table>

  <%= form_with model: @reservation, local: true do |f| %>
    <%= f.hidden_field :user_id, :value=> @current_user.id %>
    <%= f.hidden_field :room_id, :value=> @room.id %>
    <%= f.hidden_field :room_name, :value=> @room.room_name %>
    <%= f.hidden_field :charge, :value=> @room.charge %>
    <%= f.hidden_field :start_date, :value=> params[:start_date] %>
    <%= f.hidden_field :end_date, :value=> params[:end_date] %>
    <%= f.hidden_field :people, :value=> params[:people] %>
    <%= f.hidden_field :avatar, :value=> @room.avatar %>

    <%= f.submit "確定する" %>
    <% end %>
    <%= link_to :back do %>
      <button>ルーム詳細に戻る</button>
    <% end %><!-- renderで作ろうとすると激ムズだったため -->
